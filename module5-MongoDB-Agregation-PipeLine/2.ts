// ржарж┐ржХ ржЖржЫрзЗ, ржПржмрж╛рж░ ржЖржорж┐ ржЖржкржирж╛ржХрзЗ **MongoDB Aggregation Pipeline** ржПрж░ рждрж┐ржиржЯрж╛ рж╕рзНржЯрзЗржЬ тАФ `$addFields`, `$out`, ржПржмржВ `$merge` тАФ ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрзБржЭрж┐ржпрж╝рзЗ ржжрж┐ржЪрзНржЫрж┐ред

// ---

// ## **1я╕ПтГг `$addFields`**

// **ржХрж╛ржЬ:**
// ржмрж┐ржжрзНржпржорж╛ржи ржбржХрзБржорзЗржирзНржЯрзЗ ржирждрзБржи ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рж╛ ржмрж╛ ржкрзБрж░рж╛ржирзЛ ржлрж┐рж▓рзНржб ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рж╛ред
// ржПржЯрж╛ `$project` ржПрж░ ржорждрзЛ, ржХрж┐ржирзНрждрзБ ржПржЦрж╛ржирзЗ рж╢рзБржзрзБ **ржлрж┐рж▓рзНржб ржпрзЛржЧ/ржЖржкржбрзЗржЯ** ржХрж░рж╛ рж╣ржпрж╝, ржмрж╛ржХрж┐ ржлрж┐рж▓рзНржб ржмрж╛ржж ржпрж╛ржпрж╝ ржирж╛ред

// **Syntax:**

// ```js
// { $addFields: { <ржирждрзБржи_ржлрж┐рж▓рзНржб>: <expression> } }
// ```

// **Example:**
// ржзрж░рзБржи `students` ржХрж╛рж▓рзЗржХрж╢ржирзЗ ржЖржЫрзЗ:

// ```json
// { "name": "Rahim", "marks": 80 }
// ```

// Aggregation:

// ```js
// db.students.aggregate([
//   { $addFields: { grade: "A", bonusMarks: { $add: ["$marks", 5] } } }
// ])
// ```

// **Result:**

// ```json
// { "name": "Rahim", "marks": 80, "grade": "A", "bonusMarks": 85 }
// ```

// ---

// ## **2я╕ПтГг `$out`**

// **ржХрж╛ржЬ:**
// Aggregation ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ рж╕рж░рж╛рж╕рж░рж┐ **ржПржХржЯрж╛ ржирждрзБржи ржХрж╛рж▓рзЗржХрж╢ржирзЗ** ржмрж╛ ржмрж┐ржжрзНржпржорж╛ржи ржХрж╛рж▓рзЗржХрж╢ржирзЗ **ржУржнрж╛рж░рж░рж╛ржЗржЯ** ржХрж░рзЗ рж▓рж┐ржЦрзЗ ржжрзЗржпрж╝ред

// **Syntax:**

// ```js
// { $out: "collectionName" }
// ```

// **Example:**

// ```js
// db.students.aggregate([
//   { $match: { marks: { $gte: 50 } } },
//   { $out: "passed_students" }
// ])
// ```

// тЮб ржПржЦрж╛ржирзЗ `passed_students` ржирж╛ржорзЗ ржирждрзБржи ржХрж╛рж▓рзЗржХрж╢ржи рждрзИрж░рж┐ рж╣ржмрзЗ, ржпрзЗржЦрж╛ржирзЗ рж╢рзБржзрзБ ржкрж╛рж╕ ржХрж░рж╛ рж╕рзНржЯрзБржбрзЗржирзНржЯржжрзЗрж░ ржбрж╛ржЯрж╛ ржерж╛ржХржмрзЗред

// **ржирзЛржЯ:**

// * `$out` ржжрж┐рж▓рзЗ рж░рзЗржЬрж╛рж▓рзНржЯ Mongo Shell ржП ржжрзЗржЦрж╛ржмрзЗ ржирж╛, рж╕рж░рж╛рж╕рж░рж┐ ржХрж╛рж▓рзЗржХрж╢ржирзЗ рж▓рж┐ржЦрзЗ ржжрзЗржмрзЗред
// * ржмрж┐ржжрзНржпржорж╛ржи ржХрж╛рж▓рзЗржХрж╢ржирзЗрж░ ржирж╛ржо ржжрж┐рж▓рзЗ ржкрзБрж░ржирзЛ ржбрж╛ржЯрж╛ ржбрж┐рж▓рж┐ржЯ рж╣ржпрж╝рзЗ ржирждрзБржи ржбрж╛ржЯрж╛ ржмрж╕ржмрзЗред

// ---

// ## **3я╕ПтГг `$merge`**

// **ржХрж╛ржЬ:**
// Aggregation ржПрж░ рж░рзЗржЬрж╛рж▓рзНржЯ ржПржХржЯрж╛ ржХрж╛рж▓рзЗржХрж╢ржирзЗ **ржЗржирж╕рж╛рж░рзНржЯ/ржЖржкржбрзЗржЯ/ржорж╛рж░рзНржЬ** ржХрж░рзЗ ржжрзЗржпрж╝, ржкрзБрж░ржирзЛ ржбрж╛ржЯрж╛ ржорзБржЫрзЗ ржлрзЗрж▓рзЗ ржирж╛ (ржпржжрж┐ ржирж╛ рж╕рзЗржЯрж┐ржВрж╕рзЗ ржмрж▓рж╛ рж╣ржпрж╝)ред
// ржПржЯрж╛ `$out` ржПрж░ ржорждрзЛ, ржХрж┐ржирзНрждрзБ ржЕржирзЗржХ ржмрзЗрж╢рж┐ ржлрзНрж▓рзЗржХрзНрж╕рж┐ржмрж▓ред

// **Syntax:**

// ```js
// {
//   $merge: {
//     into: "collectionName",
//     on: "_id", // ржорзНржпрж╛ржЪ ржХрж░рж╛рж░ ржЬржирзНржп ржХрзЛржи ржлрж┐рж▓рзНржб
//     whenMatched: "merge", // update, merge, replace
//     whenNotMatched: "insert" // insert, discard, fail
//   }
// }
// ```

// **Example:**

// ```js
// db.students.aggregate([
//   { $match: { marks: { $gte: 50 } } },
//   {
//     $merge: {
//       into: "passed_students",
//       on: "_id",
//       whenMatched: "merge",
//       whenNotMatched: "insert"
//     }
//   }
// ])
// ```

// тЮб ржПржЦрж╛ржирзЗ `passed_students` ржХрж╛рж▓рзЗржХрж╢ржирзЗ ржкрж╛рж╕ ржХрж░рж╛ рж╕рзНржЯрзБржбрзЗржирзНржЯржжрзЗрж░ ржбрж╛ржЯрж╛ ржЖржкржбрзЗржЯ рж╣ржмрзЗ (ржпржжрж┐ ржерж╛ржХрзЗ) ржЕржержмрж╛ ржЗржирж╕рж╛рж░рзНржЯ рж╣ржмрзЗ (ржпржжрж┐ ржирж╛ ржерж╛ржХрзЗ)ред

// ---

// ### ЁЯУМ рж╕ржВржХрзНрж╖рж┐ржкрзНржд рждрзБрж▓ржирж╛:

// | Stage        | ржХрж╛ржЬ                         | ржкрзБрж░ржирзЛ ржбрж╛ржЯрж╛ ржерж╛ржХрзЗ?         |
// | ------------ | --------------------------- | ------------------------ |
// | `$addFields` | ржирждрзБржи/ржЖржкржбрзЗржЯ ржлрж┐рж▓рзНржб ржпрзЛржЧ ржХрж░рж╛    | рж╣рзНржпрж╛ржБ                    |
// | `$out`       | рж░рзЗржЬрж╛рж▓рзНржЯ ржирждрзБржи ржХрж╛рж▓рзЗржХрж╢ржирзЗ рж▓рзЗржЦрж╛  | ржирж╛ (ржкрзБрж░ржирзЛ ржбрж┐рж▓рж┐ржЯ)         |
// | `$merge`     | рж░рзЗржЬрж╛рж▓рзНржЯ ржорж╛рж░рзНржЬ/ржЖржкржбрзЗржЯ/ржЗржирж╕рж╛рж░рзНржЯ | рж╣рзНржпрж╛ржБ/ржирж╛ (ржЕржкрж╢ржи ржЕржирзБржпрж╛ржпрж╝рзА) |

// ---

// ржЖржорж┐ ржЪрж╛ржЗрж▓рзЗ ржЖржкржирж╛рж░ ржЬржирзНржп `$addFields`, `$out`, ржЖрж░ `$merge` ржирж┐рзЯрзЗ **ржПржХржЯрж╛ ржкрзНрж░рзНржпрж╛ржХржЯрж┐ржХрзНржпрж╛рж▓ ржлрзБрж▓ ржЙржжрж╛рж╣рж░ржг** ржмрж╛ржирж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рж┐ ржпрзЗржЦрж╛ржирзЗ рждрж┐ржиржЯрж╛ржХрзЗ ржПржХрж╕рж╛ржерзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж╛ рж╣ржмрзЗред
// ржЖржкржирж┐ ржХрж┐ ржЪрж╛ржи ржЖржорж┐ рж╕рзЗржЯрж╛ ржмрж╛ржирж╛ржЗ?


// db.test.aggregate([
//     {$match: {email:"weffnert2r@networkadvertising.org"}},
//     {$addFields:{roll:2089,university:"puc"}},
//     {$project: {roll:1,university:1}},
//     {$out: "students"}
    
    
//     ])



//  $out notun collection e data dhukhay but original document ke changed korena,jodi original documents ke changed korte hoy tokhon merge use korte hove

// db.test.aggregate([
//     {$match: {email:"weffnert2r@networkadvertising.org"}},
//     {$addFields:{roll:2089,university:"puc"}},
//     {$project: {roll:1,university:1}},
//     {$merge: "test"}
    
    
//     ])






    
